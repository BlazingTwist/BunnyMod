# Scratchpad
These are my test notes. Feel free to look around if you're curious about what I'm working on.

---

- Empty Shops
- Identify even if all identified - vanilla?
- This:
-       [Message: Bunny Mod] Bullet_LateUpdateBullet
        [Message: Bunny Mod]    Log: 0
        [Error  : Unity Log] Error in LateUpdate Bullets: BulletTranquilizer(Clone) (Bullet)
        [Message: Bunny Mod] BulletHitbox_OnTriggerEnter2D
        [Message: Bunny Mod]    name: PathingHelper
        [Message: Bunny Mod] Bullet_LateUpdateBullet
        [Message: Bunny Mod]    Log: 0
        [Error  : Unity Log] Error in LateUpdate Bullets: BulletTranquilizer(Clone) (Bullet)
        [Message: Bunny Mod] BulletHitbox_OnTriggerEnter2D
        [Message: Bunny Mod]    name: ObjectSprite
        [Error  : Unity Log] NullReferenceException: Object reference not set to an instance of an object
        Stack trace:
        BunnyMod.Content.BMCombat.BulletHitbox_HitObject (UnityEngine.GameObject hitObject, System.Boolean fromClient, BulletHitbox __instance) (at <1aa5e008a4f542ba9f4f87a5719f8906>:0)
        BulletHitbox.HitObject (UnityEngine.GameObject hitObject, System.Boolean fromClient) (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
        BulletHitbox.OnTriggerEnter2D (UnityEngine.Collider2D other) (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
        [Message: Bunny Mod] BulletHitbox_OnTriggerEnter2D
        [Message: Bunny Mod]    name: SwitchFloor (1774)
        [Message: Bunny Mod] Bullet_LateUpdateBullet
        [Message: Bunny Mod]    Log: 0

#
# Implementation
Features for the current update designated to be within scope.

---

## All dialogue
- BMAbilities
  - DW
- BMAgents
- BMBehaviors
- BMChallenges
- BMCombat
- BMInterface
- BMItems
- BMLevelFeelings
- BMLevelGen
- BMMiscellaneous
- BMObjects
  - FlamingBarrel DW
    - Attempted
  - SlotMachine DW
- BMQuests
- BMSprites
- BMTraits
## Boot Licker
- Test
## Eagle Eyes
- Conflicts with Rogue Vision
  - That might be a good place to find if theere's one variable that can be adjusted for all of this.
- Things to try:
  - ObjectRealOnCamera
    - Attempted
      - DW
  - BrainUpdate.RogueVisionChecks()
  - BrainUpdate.DoObjectChecks()
  - Agent.AgentOnCamera()
  - Agent.onCamera
  - PlayerAgent.agentCamera.ZoomFactor
  - PlayerControl.myCamera.zoomLevel
  - CameraScript.RealAwake
## Floor Mod Exteriors 
- [DO NOT DELETE any attempts here, there are a *ton* of places to attempt]
- Need a systematic approach listing all places where the floorMaterialType enum is used, where the rLists for floors are used, etc.
- That one that worked before?
  - Just a guess: https://github.com/Freiling87/BunnyMod/commit/9ba0fec84808d29c3206224ebcbfa37ae5f14d98?branch=9ba0fec84808d29c3206224ebcbfa37ae5f14d98&diff=split
  - But there are a few others with commit notes that imply they might be the one too. I think at this point it might be better to just get a list of methods modded and start from scratch.
- BasicFloor
  - SetExtraFloorParams
  - Spawn
    - This is the working one for the Interior floors.
- BasicSpawn
  - Spawn
    - This one calls BasicFloor.Spawn
- LoadLevel
  - FillFloors
  - FillMapChunks
  - LoadStuff2 (Technically already patched but not for this)
  - → One of these worked but I'm not sure which. Set dummy tiles to identify which one.
  - Defaulting to Slums, check if that's the bad-input default in case water and ice can't be passed. 
  - In that case, those two might rely entirely on the bools for those tiles instead. Not sure, but if that's true it would match the depth which which I've explored those algorithms, and would explain why they seem to be an exception.
- ObjectMult
  - LoadChunkWorldDataFloor
- RandomFloorsWalls
  - ___?
    - DW
- ReadChunks
  - ReadChild
    - Not sure about this one, probably should try upstreaming it with SpawnerFloor.spawn instead.
- SpawnerFloor
  - SetExtraFloorParams
  - spawn
    - Affects Home Base only, from the look of it
    - Leave this alone or make it purty? Would be kinda cool to make it reflect the last run.
- TileInfo
  - BuildFloorTileAtPosition
  - setFloor *
  - SetupFloorTile
  - SetupFloorTiles
- Might also consider owner == 0. This is used in some random location seeking stuff.
## Floor Mod Interiors (BasicFloor.Spawn)
- Do a run with the following and confirm they don't look like shit.
  - CityOfsteel
  - GreenLiving
  - Panoptikopolis
  - ShantyTown
    - Exclude Dance Floor, I think.
      - Attempted
  - SpelunkyDory
## Fountain
- Make invulnerable except to explosions (Model after PoliceBox)
- Leave rubble when destroyed
- Needs wall check extended
  - Attempted
- Make a wish
  - World Peace
  - Riches Beyond Measure
  - Good Health
  - True Friendship
  - Fame & Fortune
- Loot coins - Alerts enforcers, annoys passersby, gives you Unlucky
## Headshots
- Add: Headgear reduces damage
## Ice Chunks
- Add if Transit Experiment works, in random places
## Litter & Leaves
- Overflow indoors
  - Check for wall and don't go past it
- Add Butler Bots to Uptown & MV
- Main generator should not avoid confined spaces, since it can't block anything. I.e., why is it not spawning in alleys?
  - Attempted: modified argument to FindRandLocationGeneral
- Specific executions:
  - ATM
    - Seek one more paper-like
      - Attempted
  - Barbecue
    - Bring in slightly and slightly reduce quantity
      - Attempted
  - Boulder (large)
    - Bring in & reduce quantity slightly
      - Attempted
  - BoulderSmall
    - Ok?
  - Bush
    - Ok?
  - Flaming Barrels
    - Make slightly fewer, and reduce spread
      - Attempted
  - Goodie Dispenser
    - Add Vendor Cart parts
  - Hedge Walls
    - Attempted, BasicWall.Spawn
  - Killer Plant
    - Ok?
  - Tree
    - Ok?
## Mob Debt
- Per level: Annoyed from Level 1 / Hostile from level 5 / hit squads after Level 10
  - Attempted
- Extra xp for killing mobsters
  - Attempted. StatusEffects.AgentIsRival
## Mook Masher / Mob Debt
- Make them guilty in case you have The Law
  - Attempted
## Objectively Unpleasant
- Some starting out hostile but not acting it. Also had The Law when I did this so not sure if it's a unique interaction.
## Objectively Unpleasant + vanilla Ideological Clash
- Hostiles were generated, but they weren't hostile.
  - Attempted adding Strikes
## PoliceBox
- Owncheck with normal cops not working on tamper?
## Priors
- Hostile cops don't act hostile
  - Attempted: Set Strikes
- Makes cops annoyed so you can't pay them off.
  - Attempted: Allowed bribe through ATM with Priors
## Public Security Cams + Turrets
- Randomize direction for Panoptikopolis if attached to glass wall?
- Use Alarm Button / Police Box detection/ownership rules to align with police
  - Attempted
- North-facing placement issues
  - One worked, one didn't. Make sure you copy over the direction to the doubled camera.
  - Also needs to be extended to turrets
    - Attempted
- Detect Guilty/Wanted
  - DW, not complete yet I think.
  - Add buttons from hack with indicators to check status. Or just log when Agent interacts with it.
    - Attempted
- Attach to Turret
  - set securityType == "Turret"
    - Attempted
  - set SecurityCam.turrets to include paired turret
    - Attempted
- Special hacking rules for public cams will be necessary
  - If owner=42069 & agent is cop, that'll work
- Owncheck on tamper working?
- Add Tamper XP if PoliceState
  - Attempted
- Set ownership
  - At least one didn't work, I think it was set to the owner of its attached wall.
## Reuse Base Methods called with AccessTools
- If there are base methods you use again and again, declare them in the class to save space and increase clarity, avoiding AccessTools mess.
  - One example is PlayfieldObject.DetermineButtons, which is used in every derived class from it.
## Security Cam & other objects
- Enable to start back on if deactivated via hack
## Slot Machine
- Non-Jackpot
  - Make "Win" ding number of times of multiplier for normal wins
    - Attempted
      - I don't think this will be right, because you need an Async task for it
- Make an Owner come and tell the winner they're cut off, but give them a free drink
  - This would be good to shelve for when you do a full gambling update.
- Jackpot
  - No longer shuts down other machines in chunk
  - Keeps showing music note (I think particle effect) after jackpot ended
    - __instance.stateIndicator.STtateIndicatorOff();
  - No dialogue
- Gate shutdown behind !NoLimits
  - Attempted
## Sniper +
- Shooting from hidden object
  - Attempted with BulletHitbox.OnTriggerEnter2D
    - DW, but see what logs are saying before deletion
- Check out vTrait.BulletsPassThroughObjects. It's in BulletHitBox.HitObject
- Consider Bullet.RayHit
- Model this one on Penetrating Bullets: BulletHitbox.HitObject
  - Attempted 
    - (If this doesn't work, try with eliminating BulletHitBox.OnTriggerEnter2d patch next)
- PFO.bulletsCanPass may determine raycast end of bullet
- Give some visual indicator, either as a SPecial Indicator over NPCs, or a color change on the aiming reticle, when you are able to do a headshot
- Ability Indicator at Range
  - May need to trigger StatusEffects.SpecialAbilityInterfaceCheck as if adding a Special Ability. Not sure this will be doable with a trait.
    - Call it in AddTrait.
  - Attempted
    - StatusEffect.AddTrait
    - StatusEffects.SpecialAbilityInterfaceCheck
    - Used placeholder Chloroform sprite
    - Used placeholder range without 2f range mod from hiding
## Spelunky Dory
- Cave outcroppings
  - Ensure They adjoin Cave Walls only, there should be enough example algos in that method to demonstrate how to do it.
  - Change type to Cave, not in enum so see if another method works.
## Stealth Bastard Deluxe
- Hide Offset adjustment
  - Plant
    - North Wall
    - South Wall
  - Big Table 
    - North Wall
    - South Wall
  - BathTub
    - South doesn't seem to work at least when it's not shoved to a north wall, bounces out.
    - This was the original one with the weird trapping collider with North.
    - So it looks like you need to detect whether it's pushed north, and do South then. Otherwise do North.
    - North Wall
    - South Wall
  - PoolTable
    - North Wall
    - South Wall
  - Trash Can
    - North Wall
    - South Wall
  - Play different audio when you hide in other stuff
    - Trash Can - ManholeOpen
    - Tables - Tumble/Fall
## Stove
- Allow remote hack (IOT)
## Trait Conflict custom method 
- Add series of strings and Lists of strings
- Exclude self, give self as argument
- Trait conlficts are Unlock.cancellations
- Would be a good contribution to RL3
## Ultramyopic
- Showed up in level up traits, probably other negatives will too
## Underdark Citizen
- Take small damage if you walk into manhole instead of activating
  - Attempted
- Walkover version of flushyourself:
    [Error  : Unity Log] NullReferenceException: Object reference not set to an instance of an object
    Stack trace:
    BunnyMod.Content.BMObjects.Manhole_FlushYourself (Agent agent, ObjectReal __instance) (at <8abc5006f52b44d7a55c9ddabc9a0e08>:0)
    BunnyMod.Content.BMObjects.Hole_EnterRange (UnityEngine.GameObject myObject, Hole __instance) (at <8abc5006f52b44d7a55c9ddabc9a0e08>:0)
    Hole.EnterRange (UnityEngine.GameObject myObject) (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
    Hole.OnTriggerStay2D (UnityEngine.Collider2D other) (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
    - This only occurred when no other manholes were open. There were active toilets.
    - Walkover version also only sends to self.
    - One manhole keeps getting excluded. Check that the random selection from lists isn't excluding anything from the running.
- Water splash
  - Needs a delay. It's appearing before the player is.
    - Attempted Immediate teleportation
  - No longer working
- Manhole to Toilet
  - Attempted
- Toilet to Manhole
  - Attempted
## Veiled Threats
- Go hostile if Annoyed
  - Attempted
## Vendor Stand
- Show (Empty) after stolen from
## Very Hard On Yourself
- Added the following XP boni and mali, will need testing particularly with VHOY
  - AngeredMany = "AngeredMany",
  - BQMalusDowntown = "BQMalusDowntown",
  - BQMalusFloor = "BQMalusFloor",
  - BQMalusGame = "BQMalusGame",
  - BQMalusIndustrial = "BQMalusIndustrial",
  - BQMalusPark = "BQMalusPark",
  - BQMalusSlums = "BQMalusSlums",
  - BQMalusUptown = "BQMalusUptown",
  - ElectabilityMalus = "ElectabilityMalus",
  - FailedToFreePrisoners = "FailedToFreePrisoners",
  - StoleNone = "StoleNone",
  - TookLotsOfDamage = "TookLotsOfDamage";
- Show Innocent/Guilty indicators
  - Attempted
## Wall Mods
- Non-Randomized Walls
- BasicWall.Spawn
## Wall Mods - Border Walls
- LoadLevel.SetupBasicLevel?
  - Attempted
## Warlord
- Remove XP Extortion Reward
  - Attempted
- Customize dialogue
  - Attempted

#
# Fixing
Implemented features that have bug(s) that need to be fixed before release.

---
## StatusEffects.BecomeHidden 
- This is with the new logging added.
```
[Message: Bunny Mod] StatusEffects_BecomeHidden
[Message: Bunny Mod]    ObjectReal: null
[Message: Bunny Mod]    Agent: Cannibal
[Error  : Unity Log] NullReferenceException: Object reference not set to an instance of an object
Stack trace:
BunnyMod.Content.BMAgents.StatusEffects_BecomeHidden (ObjectReal hiddenInObject, StatusEffects __instance) (at <f2d762100f78492980360d55eb0b7e89>:0)
StatusEffects.BecomeHidden (ObjectReal hiddenInObject) (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
BunnyMod.Content.BMLevelGen+<LoadLevel_SetupMore3_3_Prefix_Replacement>d__33.MoveNext () (at <f2d762100f78492980360d55eb0b7e89>:0)
BunnyMod.Content.BMLevelGen+<LoadLevel_SetupMore3_3_Postfix>d__34.MoveNext () (at <f2d762100f78492980360d55eb0b7e89>:0)
UnityEngine.SetupCoroutine.InvokeMoveNext (System.Collections.IEnumerator enumerator, System.IntPtr returnValueAddress) (at <73b499366e5241bda47e5da76897738b>:0)
```

#
# Balancing
Implemented and Bugfixed features that need balancing before release.

---

## Telemancy
- Miscast chance with Wild Casting is way too high, or not accurate enough.
- Reduce or at least randomize Dizzy duration. Guessing 5s instead of 10s.


#
# Finalization
- Do renames *only when the code is complete*.
- Complete and win a run with each new feature, and successfully load a return to home base. This would be a full cycle of the code you can expect to run into.
- Make a promo character for each special ability or trait group, to promote the mod and community at large.
- Update Sprites
- Increment the Version Number!

#
# Documentation Update Staging

## Mutators

All traits in categories marked with an asterisk (*) are mutually exclusive with the other traits *within* that category.
 
### Floors & Features *

*N.B.: If a chunk uses non-neutral floors, they will not be affected by floor mutators.*

|Mutator                    |Basic Floor            |Features|
|:--------------------------|:----------------------|:-------|
|Arcology Ecology           |Grass                  |- More Nature features<br>- Less pollution features
|Sunken City                |Swimming Pool          |
|Transit Experiment         |Skating Rink           |- No fire features

### Knockback *

|Name                           |Knockback multiplier   |
|:------------------------------|----------------------:|
|Boring Physics                 |10 %                   |
|Save the Walls                 |50 %                   |
|Big Knockback (for comparison) |150 %                  |
|Wall Wallop World              |500 %                  |

### Level Features

|Name                           |Effect |
|:------------------------------|:------|
|Brought Back Fountain          |- Yep, it's a Fountain. Doesn't do anything yet.
|Floral-er Flora                |- Leaves scattered around Trees & Bushes.<br>- May cause performance issues for slower machines
|Litter-ally the worst          |- Trash, beautiful trash, everywhere!<br>- May cause performance issues for slower machines
|Skyway District                |- Canals in Downtown replaced with Holes

### Map Size *

Standard Chunk count for a map is 30.

|Name                           |Chunks Per Map, est.|
|:------------------------------|-------------------:|
|A City for Ants?!              |4
|Claustrophobia                 |12
|Vanilla (for comparison)       |~ 32
|Megalopolis                    |48
|Ultrapolis                     |64

### Population *

|Name                           |Roaming NPC Multiplier|
|:------------------------------|---------------------:|
|Ghost Town                     | 0 %
|Let Me See That Throng         | 400 %
|Swarm Welcome                  | 800 %

### Quest Count *

|Name                           |Force Quest Count Per Floor|
|:------------------------------|--------------------------:|
|Rushin' Revolution             |0
|Single-Minded                  |1
|Workhorse                      |4

### Quest Rewards *

|Name                           |Quest Rewards|
|:------------------------------|:------------|
|Double-Ply Rewards             |Free Item or Hire Vouchers
|Unpaid Internship              |Double XP only

### Roamers

|Name                           |Effect|
|:------------------------------|:-----|
|Hoodlum's Wonderland           |- Roaming Gang numbers increased (12 gangs for standard floor size)
|Mob Town                       |- Mafia Spawn in all Districts
|Young Men in the Neighborhood  |- Roaming Gangs spawn in all Districts

### Walls *

*N.B.: If a chunk uses non-randomized walls, they will not be affected by these mutators.*

|Name                           |Effect|
|:------------------------------|:-----|
|City of Steel                  |- All randomized walls will spawn as Steel.
|Green Living                   |- All randomized walls will spawn as Hedge.
|Panoptikopolis                 |- All randomized walls will spawn as Glass.
|Shanty Town                    |- All randomized walls will spawn as Wood.
|Spelunky Dory                  |- All randomized walls will spawn as Cave Wall.<br>- Boulders spawn in all districts.

---

## Object Interactions
- Manhole
  - Activate: Use Crowbar(15) to open
- Slot Machine
  - Added 1 & 100 denominations for gambling
  - Added chance for Jackpot
  - Added "Penny Slot Jackpot Promotion" option for hacked Slot Machines

## Traits

#### Combat - Ranged

|Name                           |Value  |Effect|
|:------------------------------|------:|:-----|
|Ballistician                   |4      |- 
|Ballistician +                 |8      |- 
|Double-Tapper                  |8      |- Bullet attacks on unaware from melee range do 2x damage<br>- Increased to 10x if you're invisible or hidden
|Sniper                         |4      |- Revolver attacks on unaware from long range have damage multiplied, based on range<br>- Bullet range increased (Vanilla 13.44 to 20)

#### Experience Gain Rate

|Name                           |Value  |Experience Rate|
|:------------------------------|------:|--------------:|
|Brainiac                       |40     |400 %
|Dim Bulb                       |- 10   |75 %
|Moron the Merrier              |- 20   |50 %
|Smooth-Brained                 |- 40   |0 %
|Very Hard-On Yourself          |- 1    |XP Loss 200 %

#### Miscellaneous

|Name                           |Value  |Camera Zoom Level|
|:------------------------------|------:|----------------:|
|Eagle Eyes                     |3      |60 %
|Eagle Eyes +                   |6      |40 %
|Myopic                         |- 4    |150 %
|Myopic +                       |- 8    |200 %

#### Social

|Name                           |Value  |Effect|
|:------------------------------|------:|:-----|
|Domineering                    |2      |- All NPCs 10% chance Submissive
|Domineering +                  |4      |- All NPCs 20% chance Submissive
|Generally Unpleasant           |- 3    |- All NPCs 20% chance Annoyed
|Objectively Unpleasant         |- 8    |- All NPCs Annoyed
|Polarizing                     |0      |- All NPCs Annoyed or Friendly.
|Polarizing +                   |1      |- All NPCS Hostile, Annoyed, Friendly, Loyal, or Aligned
|Priors                         |- 1    |- Law enforcement Annoyed<br>- Criminals Friendly
|Veiled Threats                 |3      |- When you attempt to Bribe, Extort, Mug, or Threaten, a failure will turn the target Annoyed instead of Hostile
|Warlord                        |20     |- Can make anyone Submissive by hurting them enough

#### Spawns

|Name                           |Value  |Effect|
|:------------------------------|------:|:-----|
|Haunted                        |- 2    |- Three hostile ghosts spawn in each level, and search for you.
|Mob Debt                       |- 10   |- Start with a $1,000 Debt. Remove it at the Upgrade Machine.<br>- If you still have this trait at Level 10, the Mafia will send Hit Squads after you.
|Mook Masher                    |- 4    |- An increasing number of armed and hostile Goons will try to track you down on each level. 
|Reinforcements                 |5      |- Spawns three Aligned Resistance Leaders, who roam the level and defend you.
|Reinforcements +               |10     |- Your allies are now armed and armored.

#### Stealth

|Name                           |Value  |Effect|
|:------------------------------|------:|:-----|
|Underdark Citizen              |2      |- Thieves and Cannibals hiding in Manholes no longer target you<br>- Activate or Fall in Open Manhole: Take no damage and teleport to another open Manhole<br>- Manholes spawn in all Districts

#
# Shelved
Out-of-scope features and notes for them; any bugs not worth fixing yet; avenues for codebase exploration

---

- AccessTools argument additions (new Type[1] {etc} often missing)
  - Slot machine may have been addressed

- RandomSelection.LoadRandomness is a good place to find lists to modify 

- RogueLibs conflicts not working right
    ```  
    Abbysssal — 
    Available determines whether a trait will exist in the game. 
    IsActive determines whether that trait will appear in the game (can be toggled on/off in the Traits Menu at Home Base).
    I think you should just patch StatusEffects.GetUpgradeTraits
    ```

- Targetable Items
  - InvItem.OperateItem appears to be near the beginning of this chain
    - Goes all the way down to ObjectReal.LaptopHack

- XP Rewards
  - Explore GC.Stats
  - Good for Path traits
    - Fire.DestroyMe() for Path Of Fire

## Overhauls
- Will need to make use of LoadLevel.CanUseChunk. Verified that it works before, but shelved.
### AnCapistan
  - Many XP rewards converted into money rewards
  - Objects now cost money
    - Alarm Buttons 
      - Attempted
            ```
            [Message: Bunny Mod] ObjectReal_Interact: AlarmButton (1664)
            [Message: Bunny Mod] AlarmButton_DetermineButtons
            [Warning:  HarmonyX] AccessTools.DeclaredMethod: Could not find method for type ObjectReal and name Interact and parameters ()
            [Error  : Unity Log] NullReferenceException: Object reference not set to an instance of an object
            Stack trace:
            BunnyMod.Content.BunnyHeaderTools.GetMethodWithoutOverrides[T] (System.Reflection.MethodInfo method, System.Object callFrom) (at <6db2a189c9f94358a13f920d7777c3e6>:0)
            BunnyMod.Content.BMObjects.AlarmButton_DetermineButtons (AlarmButton __instance) (at <6db2a189c9f94358a13f920d7777c3e6>:0)
            AlarmButton.DetermineButtons () (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
            PlayfieldObject.Interact (Agent agent) (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
            BunnyMod.Content.BMObjects.ObjectReal_Interact (Agent agent, ObjectReal __instance) (at <6db2a189c9f94358a13f920d7777c3e6>:0)
            ObjectReal.Interact (Agent agent) (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
            AlarmButton.Interact (Agent agent) (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
            InteractionHelper.UpdateInteractionHelper () (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
            Updater.UpdateInterface () (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
            Updater.Update () (at <5b00a25014d74f7f862ecdd1d48f7c04>:0)
            ```
    - Toilets 
      - Pay to use
    - Elevators 
      - Pay to use
    - Bathtubs 
      - Pay to use
    - Fire Hydrants 
      - Pay to use
      - No effect, but didn't have firefighter
            ```
            [Message: Bunny Mod] ObjectReal_Interact: FireHydrant (1679)
            [Info   : Unity Log] Window Lose Focus
            ```
  - NPCs
    - Firefighters
      - Only respond to fires in certain chunk types
      - Can pay them to put out fires if you want
    - More Thieves
    - More Drug Dealers
    - More Slum Dwellers
    - No Police, Cop Bots, or SuperCops
    - Upper Crusters 
      - Roam with bodyguards
      - Fewer in number
      - All aligned to each other
  - Purchase Admin access on computers
### Disco City
- Floors
  - Interiors are mostly Rugs
  - Exteriors are Dance Floor
- Light colors are randomized
  - Possible to make them pulsate?
- Cocaine
  - Far more common
  - Bribe cops with it
- Spawn Speakers, Turntables & Jukeboxes throughout city
- More roaming Musicians
- Cop Bots
  - Hack to make them dance
- Cops
  - Bodies are Yellow, Shoes are Red
  - Will occasionally come up to you and yell at you to dance
- Trait: Movebuster
  - New keybind, allows you to dance
  - Anyone who sees you dance will stare at you
- Trait: Movebuster +
  - Anyone who sees you dance will start dancing
  - Your dance is shorter, allows you to keep moving
- Satellite Dish
  - Can hack/adjust to do something special... but what?
    - Achy Breaky Bladder - All musicians are targeted by everyone in the level
    - Make people storm the broadcasting station and attack everyone inside to destroy the dish
- All Agents in Prison cells are dancing instead of standing
- Gang wars are danceoffs
- Alarm Buttons call a DANCE ALERT, not really a law enforcement thing
### MACITS
  - More happy/nature chunks
    - Greenhouse
    - Music Hall
  - Cops not annoyed at property damage
  - More musicians
  - Doctors are free
  - Replace Slum Dwellers and Upper-Crusters with Workers
  - No Thieves or Gangbangers
  - Vending machines almost all free
  - Chunks
    - No mansions/ gated communities/ Shacks
      - Replaced with simple houses and apartments
    - No arenas
    - No banks
    - No casinos
    - No churches
    - No Confiscation/Deportation Centers
    - No slave shops
    - No Zoos
### Police State
- Bribery disabled
- Chunks
  - Enable/disable, list already created
- Cop warnings
  - Littering
  - Sleeping in public
  - Looting trashcans
  - Wearing Gas Mask in public
- Elevator requires access credentials 
  - Get from an UpperCruster
    - Neutralize, Mug, Pickpocket, etc.
      - Percent success based on skin/hair match
  - Register credentials in City database
    - Computer in Law Enforcement chunks
      - Ensure generation if not present in chunk
        - Random location within chunk
          - Far from door +
          - Owned Tiles +
          - In Cell ---
  - Buy fake pass from Fixer
    - Resistance Leader would work in meantime?
  - Hack Elevator
    - Failure means flood of law enforcement and lockout to that avenue
  - Bribe Clerk in Deportation Center
  - Buy Day Pass at Elevator
    - Not available if Wanted
    - Most expensive option
  - Shapeshifter in Upper-Cruster or other authorized person
- Roaming NPCs
  - Guilty NPCs automatically have Wanted, get beatdowns in public
  - Non-Humans no longer spawn in public areas
    - Cannibals
    - Zombies
    - Vampires
    - Werewolves are ok, they're hidden
- Secret Police NPC
  - Assassin-based
  - Silenced machine guns
  - This when you done fucked up good
- Security Cams
  - Always trigger for Wanted
  - Always trigger for Guilty
  - Don't spawn correctly on North-facing walls.
    - It is possible that SecurityCam has Snap-To-Wall behaviors built-in that Trashcans don't. 
      - Try removing this algorithm's snap-to-wall portions in order to not interrupt the Camera's code from doing its thing.
    - Postfixed SetVars with `shiftAmountS = -0.16f`
      - Didn't work
  - I think I get this algorithm now: the original spot they're locating is the blank between two placed trashcans. That's why you often see them right next to each other with a gap in between.
    - So you can probably greatly simplify this algorithm to just use the spot in the middle.
- The Law
  - This would be a whole different playstyle here, wouldn't it?
  - No removal of Wanted if you fuck up this badly. You're now persona non grata.
- Trait Contraindications
  - Cops Don't Care
    - They do
  - Wanted
    - You are
- Upper Cruster changes similar to AnCapistan
- Wanted Status
  - Not removeable if you have the Wanted trait to begin with
  - Applied if Cop goes Hostile
  - Can remove by accessing Police Station Computer
  - Applied automatically to all NPCs with Guilty
    - Exempt if Chunk Owner?
    - Types

## Traits
### Spectral Fist
- Item.OnCollisionEnter2D
  - I think you can ignore these ones, we're only doing melee and these seem targeted at floor items
- MeleeHitbox
  - HitAftermath
  - HitObject
  - MeleeHitEffect

#
# Shelved Release notes

## Overhauls

These are all accessed via the Mutators menu. These affect large swathes of gameplay content.

### AnCapistan
This just makes the game act like normal life in America. By the way, it's polite to *leave a tip* when someone mugs you.

---

#### Chunks
- All Law Enforcement chunks disabled
- All Criminal-type chunks made more common

#### Map Features
- All Pollution-related features made more common
- Most public good features disabled or made pay-only

#### NPCs
- Law Enforcement roaming NPCs disabled
- Criminal roaming NPCs made more common

#### Object Interactions
|Name                   |Effects
|:----------------------|
|Alarm Button           |- Now costs money
|Elevator               |- Now costs money
|Fire Hydrant           |- Now costs money
|Toilet                 |- Now costs money

### Mostly Automated Comfortable Inclusive Terrestrial Socialism
A post-scarcity mode. It's a lot easier and friendlier, if you're into that kind of thing. Turns out you thrive on conflict!

---

#### Chunks
- Artistic & Nature chunks more common
- Shacks & Mansions disabled, replaced with apartments

#### Map Features
- Public Good features more common
- Pollution features disabled

#### NPCs
- Healing with Doctor is always free
- Thieves no longer spawn

#### Object Interactions
|Name                   |Effects
|:----------------------|

### Police State
You saw how the last guy became the Mayor - did you think he was gonna be nice once he was in office?

Consider this one hard-mode.

---

#### Chunks
- Law Enforcement chunks always spawn
- Criminal-type chunks disabled

#### Map Features
- Pollution-related features disabled
- Security Cameras now generate in public
- 
#### NPCs
- Law Enforcers always spawn 
- Law Enforcers start out Annoyed
- If a Law Enforcer goes Hostile, you gain the Wanted Trait until you remove it [Methods TBD]
- Criminal roaming NPCs disabled

#### Object Interactions
|Name                   |Effects
|:----------------------|
|Security Cam           |- Triggers alarm if anyone Wanted is detected